<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>转转  转</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            direction: rtl;
            margin: 0;
            padding: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        header {
            background: linear-gradient(90deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        h1 {
            margin: 0;
            font-size: 1.8rem;
        }
        .description {
            font-size: 1rem;
            margin: 10px 0 0;
            opacity: 0.9;
        }
        .tabs {
            display: flex;
            background: #f0f0f0;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 15px;
            cursor: pointer;
            background: #e0e0e0;
            text-align: center;
            flex: 1;
            transition: all 0.3s ease;
            font-weight: bold;
            min-width: 120px;
        }
        .tab:hover {
            background: #d0d0d0;
        }
        .tab.active {
            background: white;
            border-bottom: 3px solid #2196F3;
            color: #1976D2;
        }
        .tab-content {
            display: none;
            padding: 20px;
            min-height: 400px;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #1976D2;
        }
        input, select, button, textarea {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            width: 100%;
            margin-bottom: 12px;
            font-size: 16px;
        }
        input:focus, select:focus, textarea:focus {
            border-color: #2196F3;
            outline: none;
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
        }
        button {
            background: linear-gradient(90deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
        }
        .food-list {
            border: 1px solid #ddd;
            height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
            padding: 8px;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .food-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }
        .food-item:hover {
            background: #e3f2fd;
        }
        .food-item img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 5px;
            margin-left: 10px;
        }
        .details, .summary {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 5px solid #2196F3;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 14px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px 10px;
            text-align: right;
        }
        th {
            background-color: #2196F3;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .calculator-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: #f9f9f9;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        .calculator-item button {
            width: auto;
            margin-left: 10px;
            padding: 6px 12px;
        }
        .vitamins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 8px;
            margin-top: 12px;
        }
        .vitamin-item {
            background: #e3f2fd;
            padding: 8px;
            border-radius: 8px;
            text-align: center;
        }
        .category-filter {
            display: flex;
            overflow-x: auto;
            margin-bottom: 15px;
            padding-bottom: 10px;
            -webkit-overflow-scrolling: touch;
        }
        .category-btn {
            flex: 0 0 auto;
            margin-left: 8px;
            padding: 6px 12px;
            background: #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            white-space: nowrap;
        }
        .category-btn.active {
            background: #2196F3;
            color: white;
        }
        footer {
            text-align: center;
            padding: 15px;
            color: #666;
            border-top: 1px solid #ddd;
            font-size: 14px;
        }
        .search-container {
            position: relative;
            margin-bottom: 15px;
        }
        .search-container i {
            position: absolute;
            left: 12px;
            top: 12px;
            color: #999;
        }
        .search-container input {
            padding-right: 12px;
            padding-left: 35px;
        }
        .two-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        .action-buttons button {
            flex: 1;
        }
        .delete-btn {
            background: linear-gradient(90deg, #f44336 0%, #d32f2f 100%) !important;
        }
        .web-search-result {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 12px;
            background: #f9f9f9;
        }
        
        /* 住转 砖 */
        .barcode-section, .image-upload-section {
            margin-top: 20px;
            padding: 15px;
            border: 1px dashed #2196F3;
            border-radius: 8px;
            background: #e3f2fd;
        }
        .small-delete-btn {
            width: auto;
            padding: 5px 10px;
            font-size: 14px;
            margin: 0;
        }
        .password-change-section {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .food-image-preview {
            width: 100%;
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 10px;
        }
        .scanner-container {
            width: 100%;
            height: 300px;
            background: #000;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
        }
        .scanner-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .scanner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 2px solid #2196F3;
            box-sizing: border-box;
        }
        .hidden-section {
            display: none;
        }
        
        /*  拽专 注专 住 拽 */
        @media (max-width: 992px) {
            .two-columns {
                grid-template-columns: 1fr;
            }
            .tab {
                min-width: 110px;
                padding: 10px 12px;
                font-size: 14px;
            }
            h1 {
                font-size: 1.6rem;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            header {
                padding: 15px;
            }
            .tab-content {
                padding: 15px;
            }
            .tab {
                flex: 1 0 33.33%;
                min-width: auto;
                padding: 10px;
                font-size: 13px;
            }
            h2 {
                font-size: 1.3rem;
            }
            .vitamins-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            table {
                font-size: 13px;
            }
            th, td {
                padding: 6px 8px;
            }
            
            /* 转拽 转驻专  */
            .tabs {
                flex-direction: column;
                position: fixed;
                top: 0;
                right: -250px;
                width: 250px;
                height: 100%;
                z-index: 1000;
                transition: right 0.3s ease;
                box-shadow: -2px 0 10px rgba(0,0,0,0.2);
                overflow-y: auto;
                background: #f0f0f0;
                padding-bottom: 60px;
            }
            .tabs.active {
                right: 0;
            }
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 15px;
                right: 15px;
                z-index: 1001;
                background: #2196F3;
                color: white;
                border: none;
                padding: 10px 15px;
                border-radius: 5px;
                font-weight: bold;
            }
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 999;
            }
            .overlay.active {
                display: block;
            }
            
            body.menu-open {
                overflow: hidden;
                position: fixed;
                width: 100%;
                height: 100%;
            }
        }
        
        @media (max-width: 576px) {
            .tab {
                flex: 1 0 50%;
            }
            h1 {
                font-size: 1.4rem;
            }
            .description {
                font-size: 0.9rem;
            }
            .category-btn {
                font-size: 12px;
                padding: 5px 10px;
            }
            input, select, button, textarea {
                padding: 8px 10px;
                font-size: 15px;
            }
            .food-list {
                height: 180px;
            }
            .calculator-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .calculator-item button {
                margin: 8px 0 0;
                width: 100%;
            }
            .vitamins-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 400px) {
            .tab {
                flex: 1 0 100%;
            }
            .vitamins-grid {
                grid-template-columns: 1fr;
            }
            th, td {
                padding: 5px;
                font-size: 12px;
            }
        }

        /* 住转 砖 住驻 */
        .login-section {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            background: #f9f9f9;
        }
        .scanner-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .scanner-buttons button {
            flex: 1;
        }
        .official-search-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .official-search-btn img {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay" onclick="toggleMobileMenu()"></div>
    
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i> 转驻专
    </button>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-utensils"></i> 转转  转</h1>
            <p class="description">注专转  转 注 专 转 专砖 砖专</p>
        </header>

        <div class="tabs" id="tabsContainer">
            <div class="tab active" onclick="switchTab(0)"><i class="fas fa-search"></i> 驻砖 </div>
            <div class="tab" onclick="switchTab(1)"><i class="fas fa-calculator"></i> 砖 转</div>
            <div class="tab" onclick="switchTab(2)"><i class="fas fa-weight"></i> 专注 拽专</div>
            <div class="tab" onclick="switchTab(3)"><i class="fas fa-apple-alt"></i> 拽专转 </div>
            <div class="tab" onclick="switchTab(4)"><i class="fas fa-plus-circle"></i>  </div>
            <div class="tab" onclick="switchTab(5)"><i class="fas fa-cog"></i> 专转</div>
        </div>

        <!-- 专住转 驻砖  -->
        <div class="tab-content active" id="tab0">
            <h2><i class="fas fa-search"></i> 驻砖 </h2>
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="拽 砖  驻砖..." onkeyup="searchFood()">
            </div>
            
            <h3>转爪转 驻砖:</h3>
            <div class="food-list" id="searchResults">
                <div class="food-item">拽 注  驻砖 转</div>
            </div>
            
            <h3>驻专 :</h3>
            <div class="details" id="foodDetails"> 专  专砖</div>
        </div>

        <!-- 专住转 砖 转 -->
        <div class="tab-content" id="tab1">
            <h2><i class="fas fa-calculator"></i> 砖 转</h2>
            <div class="form-group">
                <select id="foodSelect">
                    <option value="">专 </option>
                </select>
                <input type="number" id="amountInput" placeholder="转 (专)">
                <button onclick="addToCalculator()"><i class="fas fa-plus"></i> 住祝 砖</button>
            </div>
            
            <h3>转 砖专:</h3>
            <div id="selectedFoods"></div>
            
            <h3>住 转转:</h3>
            <div class="summary" id="nutritionSummary">专 住驻 转</div>
        </div>

        <!-- 专住转 专注 拽专 -->
        <div class="tab-content" id="tab2">
            <h2><i class="fas fa-weight"></i> 砖 专注 拽专</h2>
            <div class="form-group">
                <label for="weightInput"><i class="fas fa-weight"></i> 砖拽 (拽):</label>
                <input type="number" id="weightInput">
                
                <label for="heightInput"><i class="fas fa-ruler-vertical"></i>  (住"):</label>
                <input type="number" id="heightInput">
                
                <label for="ageInput"><i class="fas fa-birthday-cake"></i> :</label>
                <input type="number" id="ageInput">
                
                <label for="genderSelect"><i class="fas fa-venus-mars"></i> :</label>
                <select id="genderSelect">
                    <option value="male">专</option>
                    <option value="female">拽</option>
                </select>
                
                <label for="activitySelect"><i class="fas fa-running"></i> 专转 驻注转:</label>
                <select id="activitySelect">
                    <option value="1.2"> 驻注</option>
                    <option value="1.375">注 驻注</option>
                    <option value="1.55">驻注</option>
                    <option value="1.725">驻注 </option>
                    <option value="1.9">驻注 转专</option>
                </select>
                
                <label for="goalSelect"><i class="fas fa-bullseye"></i> 专:</label>
                <select id="goalSelect">
                    <option value="maintain">砖专 注 砖拽</option>
                    <option value="lose">专 砖拽</option>
                    <option value="gain">注 砖拽</option>
                </select>
                
                <button onclick="calculateCalories()"><i class="fas fa-calculator"></i> 砖 爪专 拽专</button>
            </div>
            
            <div class="summary" id="calorieResult"></div>
        </div>

        <!-- 专住转 拽专转  -->
        <div class="tab-content" id="tab3">
            <h2><i class="fas fa-apple-alt"></i> 拽专转 </h2>
            
            <div class="category-filter">
                <div class="category-btn active" onclick="filterCategory('all')"></div>
                <div class="category-btn" onclick="filterCategory('fruits')">驻专转</div>
                <div class="category-btn" onclick="filterCategory('vegetables')">专拽转</div>
                <div class="category-btn" onclick="filterCategory('grains')"></div>
                <div class="category-btn" onclick="filterCategory('bakery')">驻</div>
                <div class="category-btn" onclick="filterCategory('meat')">砖专 注祝</div>
                <div class="category-btn" onclick="filterCategory('dairy')">爪专 </div>
                <div class="category-btn" onclick="filterCategory('nuts')"> 专注</div>
                <div class="category-btn" onclick="filterCategory('fish')"></div>
                <div class="category-btn" onclick="filterCategory('drinks')">砖拽转</div>
                <div class="category-btn" onclick="filterCategory('sweets')">转拽 驻</div>
                <div class="category-btn" onclick="filterCategory('spreads')">专</div>
                <div class="category-btn" onclick="filterCategory('oils')">砖</div>
                <div class="category-btn" onclick="filterCategory('seasonings')">转</div>
            </div>
            
            <h3>转 专:</h3>
            <div class="food-list" id="categoryFoods"></div>
            
            <h3>驻专 :</h3>
            <div class="details" id="categoryDetails"> 专  专砖</div>
        </div>

        <!-- 专住转   -->
        <div class="tab-content" id="tab4">
            <h2><i class="fas fa-plus-circle"></i>   专</h2>
            
            <div class="two-columns">
                <div>
                    <h3><i class="fas fa-globe"></i> 驻砖  专砖</h3>
                    <div class="form-group">
                        <input type="text" id="webSearchInput" placeholder="拽 砖  驻砖 专砖...">
                        <button onclick="searchFoodOfficial()" class="official-search-btn">
                            <i class="fas fa-search"></i> 驻砖 专 专砖
                        </button>
                    </div>
                    
                    <div class="barcode-section">
                        <h4><i class="fas fa-camera"></i> 住专拽转 专拽/转</h4>
                        <div class="scanner-buttons">
                            <button onclick="initBarcodeScanner()"><i class="fas fa-barcode"></i> 住专拽转 专拽</button>
                            <button onclick="initImageScanner()"><i class="fas fa-camera"></i> 爪 转</button>
                        </div>
                        <div id="barcode-scanner" class="scanner-container hidden-section">
                            <div class="scanner-overlay"></div>
                        </div>
                        <div id="barcode-result"></div>
                    </div>
                    
                    <div class="image-upload-section">
                        <h4><i class="fas fa-upload"></i> 注转 转</h4>
                        <input type="file" id="imageUpload" accept="image/*" onchange="handleImageUpload(this.files)">
                        <div id="imagePreview"></div>
                        <button onclick="analyzeFoodImage()" id="analyzeImageBtn" class="hidden-section"><i class="fas fa-search"></i>  转</button>
                    </div>
                    
                    <div id="webSearchResults">
                        <div class="web-search-result">
                            <p>转爪转 驻注  专 驻砖</p>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3><i class="fas fa-plus"></i> 住祝  转</h3>
                    <div class="form-group">
                        <input type="text" id="manualFoodName" placeholder="砖 ">
                        <select id="manualFoodCategory">
                            <option value="fruits">驻专转</option>
                            <option value="vegetables">专拽转</option>
                            <option value="grains"></option>
                            <option value="bakery">驻</option>
                            <option value="meat">砖专 注祝</option>
                            <option value="dairy">爪专 </option>
                            <option value="nuts"> 专注</option>
                            <option value="fish"></option>
                            <option value="drinks">砖拽转</option>
                            <option value="sweets">转拽 驻</option>
                            <option value="spreads">专</option>
                            <option value="oils">砖</option>
                            <option value="seasonings">转</option>
                        </select>
                        <input type="number" id="manualFoodCalories" placeholder="拽专转 (-100 专)">
                        <input type="number" id="manualFoodCarbs" placeholder="驻转 (专)">
                        <input type="number" id="manualFoodProtein" placeholder=" (专)">
                        <input type="number" id="manualFoodFat" placeholder="砖 (专)">
                        <input type="number" id="manualFoodFiber" placeholder="住 (专)">
                        <textarea id="manualFoodVitamins" placeholder=" (驻专:  C: 10mg,  A: 5IU)"></textarea>
                        <input type="text" id="manualFoodImage" placeholder="拽砖专 转 (驻爪)">
                        <button onclick="addManualFood()"><i class="fas fa-save"></i> 住祝 </button>
                    </div>
                    
                    <div class="hidden-section" id="deleteFoodSection">
                        <h3><i class="fas fa-trash-alt"></i> 拽转  专</h3>
                        <div class="form-group">
                            <select id="deleteFoodSelect">
                                <option value="">专  拽</option>
                            </select>
                            <input type="password" id="deletePassword" placeholder="拽 住住 拽">
                            <button class="delete-btn small-delete-btn" onclick="deleteFood()"><i class="fas fa-trash"></i> 拽 </button>
                        </div>
                    </div>
                    
                    <button onclick="toggleDeleteSection()" class="small-delete-btn"><i class="fas fa-cog"></i> 驻砖专转  转拽转</button>
                </div>
            </div>
        </div>

        <!-- 专住转 专转 -->
        <div class="tab-content" id="tab5">
            <h2><i class="fas fa-cog"></i> 专转</h2>
            
            <div class="login-section" id="loginSection">
                <h3><i class="fas fa-lock"></i> 住 专转</h3>
                <div class="form-group">
                    <input type="password" id="settingsPassword" placeholder="拽 住住">
                    <button onclick="loginToSettings()"><i class="fas fa-sign-in-alt"></i> 转专</button>
                </div>
            </div>
            
            <div class="password-change-section hidden-section" id="settingsContent">
                <h3><i class="fas fa-key"></i> 砖 住住</h3>
                <div class="form-group">
                    <input type="password" id="currentPassword" placeholder="住住 转">
                    <input type="password" id="newPassword" placeholder="住住 砖">
                    <input type="password" id="confirmPassword" placeholder="转 住住 砖">
                    <button onclick="changePassword()"><i class="fas fa-sync-alt"></i> 砖 住住</button>
                </div>
                
                <h3><i class="fas fa-database"></i>  专 </h3>
                <div class="form-group">
                    <button onclick="exportFoodDatabase()"><i class="fas fa-download"></i> 爪 专 </button>
                    <input type="file" id="importFile" accept=".json" style="display: none" onchange="importFoodDatabase(this.files)">
                    <button onclick="document.getElementById('importFile').click()"><i class="fas fa-upload"></i>  专 </button>
                </div>
            </div>
            
            <div class="summary">
                <h3>转 驻拽爪</h3>
                <p>转转  转 - 专 转 专砖 砖专 注 驻砖专转 转拽转  转 转 砖.</p>
                <p>专住: 2.1</p>
                <p>漏 2023 -  转 砖专转</p>
            </div>
        </div>

        <footer>
            <p>转转  转 - 专 转 专砖 砖专</p>
            <p>漏 2023 -  转 砖专转</p>
        </footer>
    </div>

    <script>
        // 专 转 专砖 砖专
        let foodDatabase = [
            // 驻专转
            {
                id: 1,
                name: "转驻 注抓",
                category: "fruits",
                calories: 52,
                carbs: 14,
                protein: 0.3,
                fat: 0.2,
                fiber: 2.4,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Red_Apple.jpg/500px-Red_Apple.jpg",
                vitamins: {
                    " C": "4.6 mg",
                    " K": "2.2 mcg",
                    "砖": "107 mg"
                }
            },
            {
                id: 2,
                name: "",
                category: "fruits",
                calories: 89,
                carbs: 22.8,
                protein: 1.1,
                fat: 0.3,
                fiber: 2.6,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Bananas_white_background_DS.jpg/500px-Bananas_white_background_DS.jpg",
                vitamins: {
                    " C": "8.7 mg",
                    " B6": "0.4 mg",
                    "砖": "358 mg"
                }
            },
            {
                id: 3,
                name: "转驻",
                category: "fruits",
                calories: 47,
                carbs: 11.8,
                protein: 0.9,
                fat: 0.1,
                fiber: 2.4,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Ambersweet_oranges.jpg/500px-Ambersweet_oranges.jpg",
                vitamins: {
                    " C": "53.2 mg",
                    "爪 驻转": "30 mcg"
                }
            },
            
            // 专拽转
            {
                id: 4,
                name: "注",
                category: "vegetables",
                calories: 18,
                carbs: 3.9,
                protein: 0.9,
                fat: 0.2,
                fiber: 1.2,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/Tomato_je.jpg/500px-Tomato_je.jpg",
                vitamins: {
                    " C": "13.7 mg",
                    " K": "7.9 mcg"
                }
            },
            {
                id: 5,
                name: "驻驻",
                category: "vegetables",
                calories: 15,
                carbs: 3.6,
                protein: 0.7,
                fat: 0.1,
                fiber: 0.5,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/ARS_cucumber.jpg/500px-ARS_cucumber.jpg",
                vitamins: {
                    " K": "16.4 mcg",
                    "砖": "147 mg"
                }
            },
            {
                id: 6,
                name: "专",
                category: "vegetables",
                calories: 41,
                carbs: 9.6,
                protein: 0.9,
                fat: 0.2,
                fiber: 2.8,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Vegetable-Carrot-Bundle.jpg/500px-Vegetable-Carrot-Bundle.jpg",
                vitamins: {
                    " A": "835 mcg",
                    " K": "13.2 mcg"
                }
            },
            
            // 
            {
                id: 7,
                name: "专  砖",
                category: "grains",
                calories: 130,
                carbs: 28.2,
                protein: 2.7,
                fat: 0.3,
                fiber: 0.4,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Uschauli_%28Rice%29.jpg/500px-Uschauli_%28Rice%29.jpg",
                vitamins: {
                    "转 (B1)": "0.02 mg",
                    "爪 (B3)": "0.4 mg"
                }
            },
            {
                id: 8,
                name: "  ",
                category: "bakery",
                calories: 247,
                carbs: 41,
                protein: 13,
                fat: 3.4,
                fiber: 7,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Wheat_bread.jpg/500px-Wheat_bread.jpg",
                vitamins: {
                    "转 (B1)": "0.5 mg",
                    "爪 (B3)": "4.4 mg"
                }
            },
            
            // 爪专 
            {
                id: 9,
                name: " 3%",
                category: "dairy",
                calories: 61,
                carbs: 4.7,
                protein: 3.2,
                fat: 3.3,
                fiber: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Frisian_milk.jpg/500px-Frisian_milk.jpg",
                vitamins: {
                    "住": "113 mg",
                    " D": "1.3 mcg"
                }
            },
            {
                id: 10,
                name: "专 注",
                category: "dairy",
                calories: 61,
                carbs: 4.7,
                protein: 3.5,
                fat: 3.3,
                fiber: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/Yogurt_%281%29.jpg/500px-Yogurt_%281%29.jpg",
                vitamins: {
                    "住": "121 mg",
                    " B12": "0.5 mcg"
                }
            },
            
            // 砖专 注祝
            {
                id: 11,
                name: " 注祝  注专",
                category: "meat",
                calories: 165,
                carbs: 0,
                protein: 31,
                fat: 3.6,
                fiber: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Chicken_breast.jpg/500px-Chicken_breast.jpg",
                vitamins: {
                    "爪 (B3)": "14.8 mg",
                    " B6": "0.6 mg"
                }
            },
            {
                id: 12,
                name: "",
                category: "meat",
                calories: 189,
                carbs: 0,
                protein: 29,
                fat: 7,
                fiber: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Turkey_%28food%29.jpg/500px-Turkey_%28food%29.jpg",
                vitamins: {
                    " B6": "0.8 mg",
                    "抓": "3.1 mg"
                }
            },
            
            // 
            {
                id: 13,
                name: "住",
                category: "fish",
                calories: 208,
                carbs: 0,
                protein: 20.4,
                fat: 13.4,
                fiber: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Salmo_salar.jpg/500px-Salmo_salar.jpg",
                vitamins: {
                    " D": "13.9 mcg",
                    " B12": "3.2 mcg"
                }
            },
            {
                id: 14,
                name: "",
                category: "fish",
                calories: 184,
                carbs: 0,
                protein: 30,
                fat: 6,
                fiber: 0,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Thunnus_obesus_1.jpg/500px-Thunnus_obesus_1.jpg",
                vitamins: {
                    "爪 (B3)": "22.1 mg",
                    " B6": "1 mg"
                }
            },
            
            //  专注
            {
                id: 15,
                name: "砖拽",
                category: "nuts",
                calories: 579,
                carbs: 21.6,
                protein: 21.2,
                fat: 49.9,
                fiber: 12.5,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Almonds.jpg/500px-Almonds.jpg",
                vitamins: {
                    " E": "25.6 mg",
                    "专驻 (B2)": "1.1 mg"
                }
            },
            {
                id: 16,
                name: " ",
                category: "nuts",
                calories: 654,
                carbs: 13.7,
                protein: 15.2,
                fat: 65.2,
                fiber: 6.7,
                image: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Walnut02.jpg/500px-Walnut02.jpg",
                vitamins: {
                    " B6": "0.5 mg",
                    "爪 驻转": "98 mcg"
                }
            }
        ];

        let selectedFoods = [];
        let currentCategory = 'all';
        let currentPassword = "delete123"; // 住住 转
        let barcodeScanner = null;
        let isLoggedIn = false;

        // 转 驻拽爪
        function initApp() {
            //  专砖转 转
            const foodSelect = document.getElementById('foodSelect');
            const deleteFoodSelect = document.getElementById('deleteFoodSelect');
            
            // 拽 驻砖专转 拽转
            foodSelect.innerHTML = '<option value="">专 </option>';
            deleteFoodSelect.innerHTML = '<option value="">专  拽</option>';
            
            // 住驻转  转
            foodDatabase.forEach(food => {
                const option = document.createElement('option');
                option.value = food.id;
                option.textContent = food.name;
                foodSelect.appendChild(option);
                
                const deleteOption = document.createElement('option');
                deleteOption.value = food.id;
                deleteOption.textContent = food.name;
                deleteFoodSelect.appendChild(deleteOption);
            });

            // 爪转 转 驻 拽专
            showCategoryFoods();
            
            // 拽转  住 转 转
            handleResponsiveLayout();
            
            // 拽  砖转砖 专 专
            checkLoginStatus();
        }

        // 拽转 住住 转专转
        function checkLoginStatus() {
            if (isLoggedIn) {
                document.getElementById('loginSection').classList.add('hidden-section');
                document.getElementById('settingsContent').classList.remove('hidden-section');
            } else {
                document.getElementById('loginSection').classList.remove('hidden-section');
                document.getElementById('settingsContent').classList.add('hidden-section');
            }
        }

        // 驻 转爪 专住驻住转
        function handleResponsiveLayout() {
            const width = window.innerWidth;
            const tabsContainer = document.getElementById('tabsContainer');
            
            if (width <= 768) {
                tabsContainer.classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
                document.body.classList.remove('menu-open');
            } else {
                tabsContainer.classList.add('active');
            }
        }

        // 驻转 专住转
        function switchTab(tabIndex) {
            // 拽  住 砖转 专转  专砖
            if (tabIndex === 5 && !isLoggedIn) {
                alert(' 转专  砖转 专转');
                return;
            }
            
            // 住专转 拽转 active  专住转
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // 住驻转 拽转 active 专住 专转
            document.querySelectorAll('.tab')[tabIndex].classList.add('active');
            document.getElementById('tab' + tabIndex).classList.add('active');
            
            // 住专转 转驻专   专 专
            if (window.innerWidth <= 768) {
                toggleMobileMenu();
            }
        }

        // 爪/住转专 砖 转驻专  
        function toggleMobileMenu() {
            const tabsContainer = document.getElementById('tabsContainer');
            const overlay = document.getElementById('overlay');
            
            tabsContainer.classList.toggle('active');
            overlay.classList.toggle('active');
            
            // 住驻转/住专转 拽 祝  注  专 转驻专
            document.body.classList.toggle('menu-open');
        }

        // 住 爪专 驻 拽专
        function filterCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            showCategoryFoods();
        }

        // 爪转 转 驻 拽专
        function showCategoryFoods() {
            const categoryFoods = document.getElementById('categoryFoods');
            categoryFoods.innerHTML = '';
            
            let filteredFoods = foodDatabase;
            if (currentCategory !== 'all') {
                filteredFoods = foodDatabase.filter(food => food.category === currentCategory);
            }
            
            if (filteredFoods.length === 0) {
                categoryFoods.innerHTML = '<div class="food-item"> 爪 爪专 拽专 </div>';
                return;
            }
            
            filteredFoods.forEach(food => {
                const div = document.createElement('div');
                div.className = 'food-item';
                div.innerHTML = `
                    ${food.image ? `<img src="${food.image}" alt="${food.name}" onerror="this.src='https://via.placeholder.com/40x40/2196F3/FFFFFF?text='">` : ''}
                    <span>${food.name} - ${food.calories} 拽专转</span>
                `;
                div.onclick = () => showFoodDetails(food, 'categoryDetails');
                categoryFoods.appendChild(div);
            });
        }

        // 驻砖 
        function searchFood() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const results = document.getElementById('searchResults');
            results.innerHTML = '';
            
            if (query.length < 2) {
                results.innerHTML = '<div class="food-item">拽 驻转 2 转 驻砖</div>';
                return;
            }
            
            const filteredFoods = foodDatabase.filter(food => 
                food.name.toLowerCase().includes(query)
            );
            
            if (filteredFoods.length === 0) {
                results.innerHTML = '<div class="food-item"> 爪 转爪转</div>';
                return;
            }
            
            filteredFoods.forEach(food => {
                const div = document.createElement('div');
                div.className = 'food-item';
                div.innerHTML = `
                    ${food.image ? `<img src="${food.image}" alt="${food.name}" onerror="this.src='https://via.placeholder.com/40x40/2196F3/FFFFFF?text='">` : ''}
                    <span>${food.name} - ${food.calories} 拽专转</span>
                `;
                div.onclick = () => showFoodDetails(food, 'foodDetails');
                results.appendChild(div);
            });
        }

        // 爪转 驻专 
        function showFoodDetails(food, elementId) {
            const detailsElement = document.getElementById(elementId);
            
            let vitaminsHTML = '';
            if (food.vitamins) {
                vitaminsHTML = '<div class="vitamins-grid">';
                for (const [vitamin, value] of Object.entries(food.vitamins)) {
                    vitaminsHTML += `
                        <div class="vitamin-item">
                            <div class="vitamin-name">${vitamin}</div>
                            <div class="vitamin-value">${value}</div>
                        </div>
                    `;
                }
                vitaminsHTML += '</div>';
            }
            
            detailsElement.innerHTML = `
                <h3>${food.name}</h3>
                ${food.image ? `<img src="${food.image}" alt="${food.name}" class="food-image-preview" onerror="this.style.display='none'">` : ''}
                <table>
                    <tr><th>注专 转转</th><th>-100 专</th></tr>
                    <tr><td>拽专转</td><td>${food.calories}</td></tr>
                    <tr><td>驻转</td><td>${food.carbs} 专</td></tr>
                    <tr><td></td><td>${food.protein} 专</td></tr>
                    <tr><td>砖</td><td>${food.fat} 专</td></tr>
                    <tr><td>住</td><td>${food.fiber} 专</td></tr>
                </table>
                ${vitaminsHTML ? '<h4> 专:</h4>' + vitaminsHTML : ''}
            `;
        }

        // 住驻转  砖
        function addToCalculator() {
            const foodId = document.getElementById('foodSelect').value;
            const amount = parseFloat(document.getElementById('amountInput').value);
            
            if (!foodId || !amount || isNaN(amount)) {
                alert(' 专   转');
                return;
            }
            
            const food = foodDatabase.find(item => item.id == foodId);
            if (!food) return;
            
            // 砖 注专 驻 转
            const ratio = amount / 100;
            const foodWithAmount = {
                ...food,
                amount: amount,
                calculatedCalories: food.calories * ratio,
                calculatedCarbs: food.carbs * ratio,
                calculatedProtein: food.protein * ratio,
                calculatedFat: food.fat * ratio,
                calculatedFiber: food.fiber * ratio
            };
            
            selectedFoods.push(foodWithAmount);
            updateCalculator();
        }

        // 注 砖
        function updateCalculator() {
            const selectedFoodsElement = document.getElementById('selectedFoods');
            selectedFoodsElement.innerHTML = '';
            
            selectedFoods.forEach((food, index) => {
                const div = document.createElement('div');
                div.className = 'calculator-item';
                div.innerHTML = `
                    <span>${food.name} - ${food.amount}专</span>
                    <button onclick="removeFood(${index})"><i class="fas fa-trash"></i> 住专</button>
                `;
                selectedFoodsElement.appendChild(div);
            });
            
            updateNutritionSummary();
        }

        // 住专转  砖
        function removeFood(index) {
            selectedFoods.splice(index, 1);
            updateCalculator();
        }

        // 注 住 转转
        function updateNutritionSummary() {
            const summaryElement = document.getElementById('nutritionSummary');
            
            if (selectedFoods.length === 0) {
                summaryElement.innerHTML = '专 住驻 转';
                return;
            }
            
            const totalCalories = selectedFoods.reduce((sum, food) => sum + food.calculatedCalories, 0);
            const totalCarbs = selectedFoods.reduce((sum, food) => sum + food.calculatedCarbs, 0);
            const totalProtein = selectedFoods.reduce((sum, food) => sum + food.calculatedProtein, 0);
            const totalFat = selectedFoods.reduce((sum, food) => sum + food.calculatedFat, 0);
            const totalFiber = selectedFoods.reduce((sum, food) => sum + food.calculatedFiber, 0);
            
            summaryElement.innerHTML = `
                <h3>住 转转:</h3>
                <table>
                    <tr><th>注专 转转</th><th>住 </th></tr>
                    <tr><td>拽专转</td><td>${totalCalories.toFixed(1)}</td></tr>
                    <tr><td>驻转</td><td>${totalCarbs.toFixed(1)} 专</td></tr>
                    <tr><td></td><td>${totalProtein.toFixed(1)} 专</td></tr>
                    <tr><td>砖</td><td>${totalFat.toFixed(1)} 专</td></tr>
                    <tr><td>住</td><td>${totalFiber.toFixed(1)} 专</td></tr>
                </table>
            `;
        }

        // 砖 爪专 拽专
        function calculateCalories() {
            const weight = parseFloat(document.getElementById('weightInput').value);
            const height = parseFloat(document.getElementById('heightInput').value);
            const age = parseFloat(document.getElementById('ageInput').value);
            const gender = document.getElementById('genderSelect').value;
            const activity = parseFloat(document.getElementById('activitySelect').value);
            const goal = document.getElementById('goalSelect').value;
            
            if (!weight || !height || !age) {
                alert('  转  砖转 注 注专 住驻专');
                return;
            }
            
            // 砖 BMR (Basal Metabolic Rate)
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }
            
            // 转 驻 专转 驻注转
            const tdee = bmr * activity;
            
            // 转 驻 专
            let calories, recommendation;
            if (goal === 'lose') {
                calories = tdee - 500;
                recommendation = `爪专 专 砖拽, 抓 爪专 ${calories.toFixed(0)} 拽专转 `;
            } else if (goal === 'gain') {
                calories = tdee + 500;
                recommendation = `爪专 注 砖拽, 抓 爪专 ${calories.toFixed(0)} 拽专转 `;
            } else {
                calories = tdee;
                recommendation = `爪专 砖专 注 砖拽, 抓 爪专 ${calories.toFixed(0)} 拽专转 `;
            }
            
            // 爪转 转爪转
            const resultElement = document.getElementById('calorieResult');
            resultElement.innerHTML = `
                <h3>转爪转 砖:</h3>
                <p>祝 专 住住 (BMR): ${bmr.toFixed(0)} 拽专转</p>
                <p>住 爪 拽专转 转 (TDEE): ${tdee.toFixed(0)} 拽专转</p>
                <p><strong>${recommendation}</strong></p>
                <p>注专转: 注专  注专 砖转  . 拽 专 转专 抓 转注抓 注 转/转.</p>
            `;
        }

        // 驻砖  拽专转 专砖
        function searchFoodOfficial() {
            const query = document.getElementById('webSearchInput').value.trim();
            const resultsContainer = document.getElementById('webSearchResults');
            
            if (!query) {
                resultsContainer.innerHTML = '<div class="web-search-result">  砖  驻砖</div>';
                return;
            }
            
            // 转 驻砖 拽专转 专砖
            resultsContainer.innerHTML = `
                <div class="web-search-result">
                    <h4>驻砖 专  专砖 注专: ${query}</h4>
                    <p>转专 砖专转 砖专 专转 专  专砖...</p>
                </div>
            `;
            
            // 转  注
            setTimeout(() => {
                // 转爪转 转 拽专 专砖
                const mockResults = [
                    {
                        name: `${query} (砖专 专转)`,
                        category: "other",
                        calories: Math.floor(Math.random() * 100) + 100,
                        carbs: Math.floor(Math.random() * 20) + 5,
                        protein: Math.floor(Math.random() * 10) + 2,
                        fat: Math.floor(Math.random() * 10) + 1,
                        fiber: Math.floor(Math.random() * 5),
                        image: "https://via.placeholder.com/100x100/2196F3/FFFFFF?text=",
                        vitamins: {
                            " C": `${Math.floor(Math.random() * 50)} mg`,
                            "住": `${Math.floor(Math.random() * 100)} mg`
                        }
                    }
                ];
                
                let resultsHTML = '';
                mockResults.forEach((food, index) => {
                    resultsHTML += `
                        <div class="web-search-result">
                            <h4>${food.name}</h4>
                            ${food.image ? `<img src="${food.image}" alt="${food.name}" class="food-image-preview">` : ''}
                            <p>拽专转: ${food.calories} | 驻转: ${food.carbs} | : ${food.protein} | 砖: ${food.fat}</p>
                            <button onclick="addSearchedFood(${index})">住祝 专</button>
                            <div id="foodDetails${index}" style="display:none">${JSON.stringify(food)}</div>
                        </div>
                    `;
                });
                
                resultsContainer.innerHTML = resultsHTML;
            }, 2000);
        }

        // 住驻转  砖爪 驻砖
        function addSearchedFood(index) {
            const foodDetails = document.getElementById(`foodDetails${index}`).textContent;
            const food = JSON.parse(foodDetails);
            
            // 住驻转  砖 专
            food.id = Math.max(...foodDatabase.map(f => f.id)) + 1;
            foodDatabase.push(food);
            
            // 注 注 爪
            alert(` "${food.name}" 住祝 爪 专!`);
            
            // 专注 专砖转
            initApp();
        }

        // 拽转  专
        function deleteFood() {
            const foodId = document.getElementById('deleteFoodSelect').value;
            const password = document.getElementById('deletePassword').value;
            
            if (!foodId) {
                alert(' 专  拽');
                return;
            }
            
            if (password !== currentPassword) {
                alert('住住  转拽');
                return;
            }
            
            // 驻砖 
            const foodIndex = foodDatabase.findIndex(food => food.id == foodId);
            
            if (foodIndex === -1) {
                alert('  爪');
                return;
            }
            
            // 拽转 
            const foodName = foodDatabase[foodIndex].name;
            foodDatabase.splice(foodIndex, 1);
            
            // 注 注 爪
            alert(` "${foodName}" 拽 爪 专!`);
            
            // 专注 专砖转
            initApp();
            
            // 驻住 砖 住住
            document.getElementById('deletePassword').value = '';
        }

        // 住驻转  转
        function addManualFood() {
            const name = document.getElementById('manualFoodName').value.trim();
            const category = document.getElementById('manualFoodCategory').value;
            const calories = parseFloat(document.getElementById('manualFoodCalories').value);
            const carbs = parseFloat(document.getElementById('manualFoodCarbs').value);
            const protein = parseFloat(document.getElementById('manualFoodProtein').value);
            const fat = parseFloat(document.getElementById('manualFoodFat').value);
            const fiber = parseFloat(document.getElementById('manualFoodFiber').value);
            const vitaminsText = document.getElementById('manualFoodVitamins').value;
            const imageUrl = document.getElementById('manualFoodImage').value.trim();
            
            if (!name || isNaN(calories) || isNaN(carbs) || isNaN(protein) || isNaN(fat) || isNaN(fiber)) {
                alert('  转  砖转 专砖 注 注专 住驻专');
                return;
            }
            
            // 注 
            const vitamins = {};
            if (vitaminsText) {
                const vitaminPairs = vitaminsText.split(',');
                vitaminPairs.forEach(pair => {
                    const [key, value] = pair.split(':').map(item => item.trim());
                    if (key && value) {
                        vitamins[key] = value;
                    }
                });
            }
            
            // 爪专转  砖
            const newFood = {
                id: Math.max(...foodDatabase.map(f => f.id)) + 1,
                name,
                category,
                calories,
                carbs,
                protein,
                fat,
                fiber,
                vitamins,
                image: imageUrl || null
            };
            
            // 住驻 专
            foodDatabase.push(newFood);
            
            // 注 注 爪
            alert(` "${name}" 住祝 爪 专!`);
            
            // 专注 专砖转
            initApp();
            
            // 拽 驻住
            document.getElementById('manualFoodName').value = '';
            document.getElementById('manualFoodCalories').value = '';
            document.getElementById('manualFoodCarbs').value = '';
            document.getElementById('manualFoodProtein').value = '';
            document.getElementById('manualFoodFat').value = '';
            document.getElementById('manualFoodFiber').value = '';
            document.getElementById('manualFoodVitamins').value = '';
            document.getElementById('manualFoodImage').value = '';
        }

        // 转专转 专转
        function loginToSettings() {
            const password = document.getElementById('settingsPassword').value;
            
            if (password === currentPassword) {
                isLoggedIn = true;
                checkLoginStatus();
                alert('转专转 爪!');
                document.getElementById('settingsPassword').value = '';
            } else {
                alert('住住  转拽');
            }
        }

        // 砖 住住
        function changePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;
            
            if (!current || !newPass || !confirm) {
                alert('  转  砖转 住住');
                return;
            }
            
            if (current !== currentPassword) {
                alert('住住 转  转拽');
                return;
            }
            
            if (newPass !== confirm) {
                alert('住住 砖 转 住住  转');
                return;
            }
            
            currentPassword = newPass;
            alert('住住 砖转 爪!');
            
            // 拽 砖转
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        // 爪/住转专 砖 专 拽转 
        function toggleDeleteSection() {
            const section = document.getElementById('deleteFoodSection');
            section.classList.toggle('hidden-section');
        }

        // 转 住专拽 专拽
        function initBarcodeScanner() {
            const scannerContainer = document.getElementById('barcode-scanner');
            const barcodeResult = document.getElementById('barcode-result');
            
            scannerContainer.classList.toggle('hidden-section');
            
            if (!scannerContainer.classList.contains('hidden-section')) {
                // 转 住专拽转 专拽
                barcodeResult.innerHTML = '<p>驻注 住专拽 专拽...</p>';
                
                // 转 住专拽 爪转 专 3 砖转
                setTimeout(() => {
                    const mockBarcode = "123456789012";
                    barcodeResult.innerHTML = `
                        <p>专拽 住专拽: ${mockBarcode}</p>
                        <p>驻砖 注 注 爪专 专 专砖...</p>
                    `;
                    
                    // 转 爪转 爪专 专 专砖
                    setTimeout(() => {
                        barcodeResult.innerHTML = `
                            <div class="web-search-result">
                                <h4>拽拽 拽 (拽拽 500 ") - 专 专砖</h4>
                                <p>拽专转: 42 | 驻转: 10.6 | : 0 | 砖: 0</p>
                                <button onclick="addScannedFood()">住祝 专</button>
                            </div>
                        `;
                    }, 2000);
                }, 3000);
            } else {
                barcodeResult.innerHTML = '';
            }
        }

        // 转 住专拽 转
        function initImageScanner() {
            alert('驻转转 爪 住专拽转 转...');
            //   拽 驻转转 爪 驻注
            // 砖, 驻转 转  注转 转
            document.getElementById('imageUpload').click();
        }

        // 住驻转  砖住专拽 爪注转 专拽
        function addScannedFood() {
            //   砖住专拽
            const scannedFood = {
                id: Math.max(...foodDatabase.map(f => f.id)) + 1,
                name: "拽拽 拽 (拽拽 500 \")",
                category: "drinks",
                calories: 42,
                carbs: 10.6,
                protein: 0,
                fat: 0,
                fiber: 0,
                image: "https://via.placeholder.com/100x100/D32F2F/FFFFFF?text=拽",
                vitamins: {
                    "拽驻": "34 mg"
                }
            };
            
            foodDatabase.push(scannedFood);
            alert(` "${scannedFood.name}" 住祝 爪 专!`);
            
            // 专注 专
            initApp();
            
            // 驻住 住专拽 专拽
            document.getElementById('barcode-scanner').classList.add('hidden-section');
            document.getElementById('barcode-result').innerHTML = '';
        }

        // 驻 注转 转
        function handleImageUpload(files) {
            if (files.length === 0) return;
            
            const file = files[0];
            const preview = document.getElementById('imagePreview');
            const analyzeBtn = document.getElementById('analyzeImageBtn');
            
            // 爪转 转爪 拽
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.innerHTML = `<img src="${e.target.result}" class="food-image-preview" alt="转爪 拽">`;
                analyzeBtn.classList.remove('hidden-section');
            };
            reader.readAsDataURL(file);
        }

        // 转 转 砖 
        function analyzeFoodImage() {
            const analyzeBtn = document.getElementById('analyzeImageBtn');
            analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 转 转...';
            
            // 转 转 转 拽专 专砖
            setTimeout(() => {
                const analyzedFood = {
                    name: "住 专拽转 - 砖专 专转",
                    category: "vegetables",
                    calories: 50,
                    carbs: 10,
                    protein: 2,
                    fat: 0.5,
                    fiber: 3,
                    image: "https://via.placeholder.com/100x100/4CAF50/FFFFFF?text=住"
                };
                
                //  驻住 注 转
                document.getElementById('manualFoodName').value = analyzedFood.name;
                document.getElementById('manualFoodCategory').value = analyzedFood.category;
                document.getElementById('manualFoodCalories').value = analyzedFood.calories;
                document.getElementById('manualFoodCarbs').value = analyzedFood.carbs;
                document.getElementById('manualFoodProtein').value = analyzedFood.protein;
                document.getElementById('manualFoodFat').value = analyzedFood.fat;
                document.getElementById('manualFoodFiber').value = analyzedFood.fiber;
                document.getElementById('manualFoodImage').value = analyzedFood.image;
                
                analyzeBtn.innerHTML = '<i class="fas fa-search"></i>  转';
                alert('转 转 爪 拽专 专砖! 砖转 驻住  转.');
            }, 3000);
        }

        // 爪 专 
        function exportFoodDatabase() {
            const dataStr = JSON.stringify(foodDatabase, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'food-database.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        //  专 
        function importFoodDatabase(files) {
            if (files.length === 0) return;
            
            const file = files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    if (Array.isArray(importedData)) {
                        foodDatabase = importedData;
                        initApp();
                        alert('专   爪!');
                    } else {
                        alert('拽抓  转拽');
                    }
                } catch (error) {
                    alert('砖 拽专转 拽抓: ' + error.message);
                }
            };
            
            reader.readAsText(file);
        }

        // 转 驻拽爪 注转 注转 祝
        window.onload = initApp;
        
        // 驻 砖  
        window.addEventListener('resize', handleResponsiveLayout);
    </script>
</body>
</html>